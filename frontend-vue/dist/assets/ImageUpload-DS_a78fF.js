import{_ as e,j as a,q as t,c as l,o as r,b as s,a as o,t as u,E as i,n,y as d,u as c,v as m}from"./index-klLf_Ke9.js";import{u as p}from"./useImageUpload-DFF4QoUP.js";const g={class:"space-y-2"},b={key:0,class:"block text-sm font-medium text-gray-700"},v={key:1,class:"relative"},f=["src","alt"],y={key:0,class:"text-blue-600"},x={key:1,class:"text-gray-500"},h={key:2,class:"text-gray-500"},k={class:"flex items-center space-x-2"},w=e({__name:"ImageUpload",props:{modelValue:{type:String,default:""},label:{type:String,default:""},previewAlt:{type:String,default:"Preview"}},emits:["update:modelValue"],setup(e,{emit:w}){const V=e,I=w,{uploading:j,uploadImage:C,validateImageUrl:_}=p(),A=a(null),U=a(""),S=async e=>{const a=e.target.files[0];if(a){const e=await C(a);e&&I("update:modelValue",e)}e.target.value=""},q=async e=>{const a=e.dataTransfer.files[0];if(a){const e=await C(a);e&&I("update:modelValue",e)}},B=()=>{U.value&&_(U.value)?I("update:modelValue",U.value):U.value&&(U.value="")};return t(()=>V.modelValue,e=>{e&&e.startsWith("http")?U.value=e:U.value=""},{immediate:!0}),(a,t)=>(r(),l("div",g,[e.label?(r(),l("label",b,u(e.label),1)):s("",!0),e.modelValue&&!i(j)?(r(),l("div",v,[o("img",{src:e.modelValue,alt:e.previewAlt,class:"w-full h-32 object-cover rounded-lg border"},null,8,f),o("button",{onClick:t[0]||(t[0]=e=>a.$emit("update:modelValue","")),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition",title:"Remover imagem"}," × ")])):s("",!0),o("div",{onDragover:t[3]||(t[3]=d(()=>{},["prevent"])),onDrop:d(q,["prevent"]),class:n(["border-2 border-dashed rounded-lg p-4 text-center transition-colors",i(j)?"border-blue-300 bg-blue-50":"border-gray-300 hover:border-gray-400"])},[o("input",{ref_key:"fileInput",ref:A,type:"file",accept:"image/*",onChange:S,class:"hidden"},null,544),i(j)?(r(),l("div",y,[...t[5]||(t[5]=[o("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},null,-1),o("p",null,"Enviando imagem...",-1)])])):e.modelValue?(r(),l("div",h,[o("button",{onClick:t[2]||(t[2]=e=>a.$refs.fileInput.click()),class:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition"}," Alterar imagem ")])):(r(),l("div",x,[t[6]||(t[6]=o("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),t[7]||(t[7]=o("p",{class:"mb-2"},"Arraste uma imagem aqui ou",-1)),o("button",{onClick:t[1]||(t[1]=e=>a.$refs.fileInput.click()),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"}," Selecionar arquivo "),t[8]||(t[8]=o("p",{class:"text-xs text-gray-400 mt-2"},"PNG, JPG até 5MB",-1))]))],34),o("div",k,[t[9]||(t[9]=o("span",{class:"text-sm text-gray-500"},"Ou",-1)),c(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>U.value=e),type:"url",placeholder:"Cole uma URL de imagem",class:"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onBlur:B},null,544),[[m,U.value]])])]))}},[["__scopeId","data-v-2d31b911"]]);export{w as I};
