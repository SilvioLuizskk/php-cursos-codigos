import{_ as e,r as t,i as a,o as s,c as o,a as l,b as r,d as n,w as d,j as i,q as c,v as u,t as p,F as m,e as g,s as v,n as x,u as y}from"./index-BgbrXe1X.js";const h={class:"space-y-6"},b={class:"flex justify-between items-center"},f={class:"flex items-center space-x-4"},w={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},C={class:"bg-white rounded-lg shadow p-4"},k={class:"text-center"},P={class:"text-2xl font-bold text-yellow-600"},E={class:"bg-white rounded-lg shadow p-4"},S={class:"text-center"},R={class:"text-2xl font-bold text-blue-600"},j={class:"bg-white rounded-lg shadow p-4"},A={class:"text-center"},I={class:"text-2xl font-bold text-purple-600"},z={class:"bg-white rounded-lg shadow p-4"},D={class:"text-center"},$={class:"text-2xl font-bold text-green-600"},q={class:"bg-white rounded-lg shadow p-4"},B={class:"text-center"},T={class:"text-2xl font-bold text-red-600"},L={class:"bg-white rounded-lg shadow overflow-hidden"},M={class:"overflow-x-auto"},F={class:"min-w-full divide-y divide-gray-200"},N={class:"bg-white divide-y divide-gray-200"},V={class:"px-6 py-4 whitespace-nowrap"},_={class:"text-sm font-medium text-gray-900"},U={class:"text-sm text-gray-500"},O={class:"px-6 py-4 whitespace-nowrap"},X={class:"text-sm font-medium text-gray-900"},Z={class:"text-sm text-gray-500"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap"},Q=["value","onChange"],H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Y=["onClick"],ee=["onClick"],te={key:0,class:"text-center py-8 text-gray-500"},ae={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},se={class:"bg-white rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto"},oe={class:"px-6 py-4 border-b"},le={class:"flex justify-between items-center"},re={class:"text-lg font-semibold text-gray-900"},ne={class:"p-6 space-y-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ie={class:"space-y-1 text-sm"},ce={class:"space-y-1 text-sm"},ue={class:"space-y-3"},pe={class:"flex items-center space-x-3"},me=["src","alt"],ge={class:"font-medium"},ve={class:"text-sm text-gray-600"},xe={class:"font-medium"},ye={class:"mt-4 pt-4 border-t"},he={class:"flex justify-between text-lg font-semibold"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"space-y-1 text-sm"},we={key:0},Ce={class:"space-y-1 text-sm"},ke={key:0},Pe={class:"flex justify-end space-x-3 pt-4 border-t"},Ee={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Se={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Re={class:"space-y-4"},je={class:"flex justify-end space-x-3"},Ae=e({__name:"AdminPedidos",setup(e){const{showNotification:Ae}=y(),Ie=t([]),ze=t([]),De=t(null),$e=t(!1),qe=t(null),Be=t(""),Te=t(""),Le=t(""),Me=a(()=>{const e={pending:0,processing:0,shipped:0,delivered:0,cancelled:0};return Ie.value.forEach(t=>{switch(t.status){case"Pendente":e.pending++;break;case"Processando":e.processing++;break;case"Enviado":e.shipped++;break;case"Entregue":e.delivered++;break;case"Cancelado":e.cancelled++}}),e}),Fe=()=>{let e=Ie.value;if(Te.value&&(e=e.filter(e=>e.status===Te.value)),Le.value){const t=Le.value.toLowerCase();e=e.filter(e=>e.id.toLowerCase().includes(t)||e.customer.name.toLowerCase().includes(t)||e.customer.email.toLowerCase().includes(t))}ze.value=e},Ne=async()=>{try{const e=Ie.value.find(e=>e.id===qe.value);e&&(e.trackingCode=Be.value,Ae("CÃ³digo de rastreamento adicionado com sucesso!","success")),$e.value=!1,Be.value="",qe.value=null}catch(e){console.error("Erro ao salvar rastreamento:",e),Ae("Erro ao salvar cÃ³digo de rastreamento","error")}},Ve=e=>new Intl.NumberFormat("pt-BR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),_e=e=>({Aprovado:"bg-green-100 text-green-800",Pendente:"bg-yellow-100 text-yellow-800",Pago:"bg-green-100 text-green-800",Recusado:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),Ue=()=>{try{const e=ze.value.map(e=>({id:e.id,cliente:e.customer.name,email:e.customer.email,telefone:e.customer.phone,valor:e.total,status:e.status,data:e.createdAt,pagamento:{metodo:e.payment.method,status:e.payment.status},entrega:{metodo:e.shipping.method,endereco:e.shipping.address,cidade:e.shipping.city,estado:e.shipping.state,cep:e.shipping.zipCode},rastreamento:e.trackingCode,itens:e.items.map(e=>({nome:e.name,quantidade:e.quantity,preco:e.price}))})),t={dataGeracao:(new Date).toLocaleString("pt-BR"),totalPedidos:e.length,filtroStatus:Te.value||"Todos",pedidos:e},a=JSON.stringify(t,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(a),o=`pedidos-${Te.value||"todos"}-${(new Date).toISOString().split("T")[0]}.json`,l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download",o),l.click(),Ae(`${e.length} pedidos exportados com sucesso!`,"success")}catch(e){console.error("Erro ao exportar pedidos:",e),Ae("Erro ao exportar pedidos","error")}};return s(()=>{(async()=>{try{Ie.value=[{id:"00123",customer:{name:"JoÃ£o Silva",email:"joao@email.com",phone:"(11) 99999-9999"},items:[{id:1,name:"Chinelo Praia Azul",price:49.9,quantity:1,image:"https://via.placeholder.com/50x50?text=P1"},{id:2,name:"Chinelo Casual Preto",price:39.9,quantity:2,image:"https://via.placeholder.com/50x50?text=P2"}],total:129.7,status:"Processando",createdAt:"2024-01-15T10:30:00Z",payment:{method:"PIX",status:"Aprovado",transactionId:"PIX123456"},shipping:{method:"PAC",address:"Rua das Flores, 123",city:"SÃ£o Paulo",state:"SP",zipCode:"01234-567"},trackingCode:null},{id:"00122",customer:{name:"Maria Santos",email:"maria@email.com",phone:"(11) 88888-8888"},items:[{id:3,name:"Chinelo Esportivo Branco",price:69.9,quantity:1,image:"https://via.placeholder.com/50x50?text=P3"}],total:69.9,status:"Enviado",createdAt:"2024-01-14T15:45:00Z",payment:{method:"CartÃ£o de CrÃ©dito",status:"Aprovado",transactionId:"CC789012"},shipping:{method:"SEDEX",address:"Av. Paulista, 456",city:"SÃ£o Paulo",state:"SP",zipCode:"01310-100"},trackingCode:"BR987654321BR"},{id:"00121",customer:{name:"Pedro Oliveira",email:"pedro@email.com",phone:"(11) 77777-7777"},items:[{id:4,name:"Chinelo Infantil Colorido",price:39.9,quantity:1,image:"https://via.placeholder.com/50x50?text=P4"}],total:39.9,status:"Entregue",createdAt:"2024-01-13T09:15:00Z",payment:{method:"Dinheiro",status:"Pago",transactionId:null},shipping:{method:"Retirada na Loja",address:"Rua dos Chinelos, 789",city:"SÃ£o Paulo",state:"SP",zipCode:"01234-567"},trackingCode:null}],Fe()}catch(e){console.error("Erro ao carregar pedidos:",e),Ae("Erro ao carregar pedidos","error")}})()}),(e,t)=>(l(),o("div",h,[r("div",b,[t[9]||(t[9]=r("h1",{class:"text-2xl font-bold text-gray-900"},"Gerenciar Pedidos",-1)),r("div",f,[d(r("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>Te.value=e),onChange:Fe,class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[8]||(t[8]=[c('<option value="" data-v-52dc29c0>Todos os Status</option><option value="Pendente" data-v-52dc29c0>Pendente</option><option value="Processando" data-v-52dc29c0>Processando</option><option value="Enviado" data-v-52dc29c0>Enviado</option><option value="Entregue" data-v-52dc29c0>Entregue</option><option value="Cancelado" data-v-52dc29c0>Cancelado</option>',6)])],544),[[i,Te.value]]),d(r("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>Le.value=e),onInput:Fe,type:"text",placeholder:"Buscar por ID, cliente...",class:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[u,Le.value]]),r("button",{onClick:Ue,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition ml-2"}," ðŸ“Š Exportar Pedidos ")])]),r("div",w,[r("div",C,[r("div",k,[r("div",P,p(Me.value.pending),1),t[10]||(t[10]=r("p",{class:"text-sm text-gray-600"},"Pendentes",-1))])]),r("div",E,[r("div",S,[r("div",R,p(Me.value.processing),1),t[11]||(t[11]=r("p",{class:"text-sm text-gray-600"},"Processando",-1))])]),r("div",j,[r("div",A,[r("div",I,p(Me.value.shipped),1),t[12]||(t[12]=r("p",{class:"text-sm text-gray-600"},"Enviados",-1))])]),r("div",z,[r("div",D,[r("div",$,p(Me.value.delivered),1),t[13]||(t[13]=r("p",{class:"text-sm text-gray-600"},"Entregues",-1))])]),r("div",q,[r("div",B,[r("div",T,p(Me.value.cancelled),1),t[14]||(t[14]=r("p",{class:"text-sm text-gray-600"},"Cancelados",-1))])])]),r("div",L,[r("div",M,[r("table",F,[t[16]||(t[16]=r("thead",{class:"bg-gray-50"},[r("tr",null,[r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pedido "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cliente "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Valor "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Data "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pagamento "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," AÃ§Ãµes ")])],-1)),r("tbody",N,[(l(!0),o(m,null,g(ze.value,e=>{return l(),o("tr",{key:e.id,class:"hover:bg-gray-50"},[r("td",V,[r("div",_," #"+p(e.id),1),r("div",U,p(e.items.length)+" item(ns) ",1)]),r("td",O,[r("div",X,p(e.customer.name),1),r("div",Z,p(e.customer.email),1)]),r("td",G," R$ "+p(Ve(e.total)),1),r("td",J,[r("select",{value:e.status,onChange:t=>(async(e,t)=>{try{const a=Ie.value.find(t=>t.id===e);a&&(a.status=t,Ae(`Status do pedido #${e} atualizado para ${t}`,"success"))}catch(a){console.error("Erro ao atualizar status:",a),Ae("Erro ao atualizar status do pedido","error")}})(e.id,t.target.value),class:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[15]||(t[15]=[c('<option value="Pendente" data-v-52dc29c0>Pendente</option><option value="Processando" data-v-52dc29c0> Processando </option><option value="Enviado" data-v-52dc29c0>Enviado</option><option value="Entregue" data-v-52dc29c0>Entregue</option><option value="Cancelado" data-v-52dc29c0>Cancelado</option>',5)])],40,Q)]),r("td",H,p((a=e.createdAt,new Date(a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))),1),r("td",K,[r("span",{class:x(["px-2 py-1 rounded text-xs",_e(e.payment.status)])},p(e.payment.method)+" - "+p(e.payment.status),3)]),r("td",W,[r("button",{onClick:t=>(e=>{De.value=e})(e),class:"text-blue-600 hover:text-blue-900 mr-3"}," Ver Detalhes ",8,Y),"Enviado"===e.status?(l(),o("button",{key:0,onClick:t=>(e=>{qe.value=e.id,Be.value=e.trackingCode||"",$e.value=!0})(e),class:"text-purple-600 hover:text-purple-900 text-xs"}," Rastreamento ",8,ee)):n("",!0)])]);var a}),128))])])]),0===ze.value.length?(l(),o("div",te," Nenhum pedido encontrado ")):n("",!0)]),De.value?(l(),o("div",ae,[r("div",se,[r("div",oe,[r("div",le,[r("h3",re," Pedido #"+p(De.value.id),1),r("button",{onClick:t[2]||(t[2]=e=>De.value=null),class:"text-gray-400 hover:text-gray-600"},[...t[17]||(t[17]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r("div",ne,[r("div",de,[r("div",null,[t[21]||(t[21]=r("h4",{class:"font-medium text-gray-900 mb-2"}," Dados do Cliente ",-1)),r("div",ie,[r("p",null,[t[18]||(t[18]=r("strong",null,"Nome:",-1)),v(" "+p(De.value.customer.name),1)]),r("p",null,[t[19]||(t[19]=r("strong",null,"Email:",-1)),v(" "+p(De.value.customer.email),1)]),r("p",null,[t[20]||(t[20]=r("strong",null,"Telefone:",-1)),v(" "+p(De.value.customer.phone),1)])])]),r("div",null,[t[22]||(t[22]=r("h4",{class:"font-medium text-gray-900 mb-2"}," EndereÃ§o de Entrega ",-1)),r("div",ce,[r("p",null,p(De.value.shipping.address),1),r("p",null,p(De.value.shipping.city)+", "+p(De.value.shipping.state)+" - "+p(De.value.shipping.zipCode),1)])])]),r("div",null,[t[24]||(t[24]=r("h4",{class:"font-medium text-gray-900 mb-3"}," Itens do Pedido ",-1)),r("div",ue,[(l(!0),o(m,null,g(De.value.items,e=>(l(),o("div",{key:e.id,class:"flex items-center justify-between border-b pb-3"},[r("div",pe,[r("img",{src:e.image,alt:e.name,class:"w-12 h-12 object-cover rounded"},null,8,me),r("div",null,[r("p",ge,p(e.name),1),r("p",ve," Quantidade: "+p(e.quantity),1)])]),r("span",xe,"R$ "+p(Ve(e.price*e.quantity)),1)]))),128))]),r("div",ye,[r("div",he,[t[23]||(t[23]=r("span",null,"Total:",-1)),r("span",null,"R$ "+p(Ve(De.value.total)),1)])])]),r("div",be,[r("div",null,[t[28]||(t[28]=r("h4",{class:"font-medium text-gray-900 mb-2"}," Pagamento ",-1)),r("div",fe,[r("p",null,[t[25]||(t[25]=r("strong",null,"MÃ©todo:",-1)),v(" "+p(De.value.payment.method),1)]),r("p",null,[t[26]||(t[26]=r("strong",null,"Status:",-1)),r("span",{class:x(["px-2 py-1 rounded text-xs ml-1",_e(De.value.payment.status)])},p(De.value.payment.status),3)]),De.value.payment.transactionId?(l(),o("p",we,[t[27]||(t[27]=r("strong",null,"ID TransaÃ§Ã£o:",-1)),v(" "+p(De.value.payment.transactionId),1)])):n("",!0)])]),r("div",null,[t[32]||(t[32]=r("h4",{class:"font-medium text-gray-900 mb-2"}," Entrega ",-1)),r("div",Ce,[r("p",null,[t[29]||(t[29]=r("strong",null,"MÃ©todo:",-1)),v(" "+p(De.value.shipping.method),1)]),r("p",null,[t[30]||(t[30]=r("strong",null,"Status:",-1)),v(" "+p(De.value.status),1)]),De.value.trackingCode?(l(),o("p",ke,[t[31]||(t[31]=r("strong",null,"CÃ³digo de Rastreamento:",-1)),v(" "+p(De.value.trackingCode),1)])):n("",!0)])])]),r("div",Pe,["Cancelado"!==De.value.status&&"Entregue"!==De.value.status?(l(),o("button",{key:0,onClick:t[3]||(t[3]=e=>(async e=>{if(confirm("Tem certeza que deseja cancelar este pedido?"))try{const t=Ie.value.find(t=>t.id===e);t&&(t.status="Cancelado",Ae(`Pedido #${e} cancelado com sucesso`,"success"))}catch(t){console.error("Erro ao cancelar pedido:",t),Ae("Erro ao cancelar pedido","error")}})(De.value.id)),class:"px-4 py-2 text-red-600 border border-red-600 rounded hover:bg-red-50"}," Cancelar Pedido ")):n("",!0),"Processando"===De.value.status?(l(),o("button",{key:1,onClick:t[4]||(t[4]=e=>(async e=>{try{const t=Ie.value.find(t=>t.id===e);t&&(t.status="Enviado",Ae(`Pedido #${e} marcado como enviado`,"success"))}catch(t){console.error("Erro ao marcar como enviado:",t),Ae("Erro ao atualizar status","error")}})(De.value.id)),class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Marcar como Enviado ")):n("",!0),"Enviado"===De.value.status?(l(),o("button",{key:2,onClick:t[5]||(t[5]=e=>(async e=>{try{const t=Ie.value.find(t=>t.id===e);t&&(t.status="Entregue",Ae(`Pedido #${e} marcado como entregue`,"success"))}catch(t){console.error("Erro ao marcar como entregue:",t),Ae("Erro ao atualizar status","error")}})(De.value.id)),class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"}," Marcar como Entregue ")):n("",!0)])])])])):n("",!0),$e.value?(l(),o("div",Ee,[r("div",Se,[t[34]||(t[34]=r("h3",{class:"text-lg font-semibold mb-4"}," Adicionar CÃ³digo de Rastreamento ",-1)),r("div",Re,[r("div",null,[t[33]||(t[33]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"CÃ³digo de Rastreamento",-1)),d(r("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>Be.value=e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"BR123456789BR"},null,512),[[u,Be.value]])]),r("div",je,[r("button",{onClick:t[7]||(t[7]=e=>$e.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancelar "),r("button",{onClick:Ne,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Salvar ")])])])])):n("",!0)]))}},[["__scopeId","data-v-52dc29c0"]]);export{Ae as default};
