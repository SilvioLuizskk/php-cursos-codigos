import{_ as e,r as a,o as r,c as l,a as t,b as s,d as o,F as i,e as d,t as n,h as c,w as u,v as m,f as v,u as g}from"./index-BgbrXe1X.js";import{I as p}from"./ImageUpload-B05SUEID.js";const x={class:"space-y-6"},b={class:"flex justify-between items-center"},y={class:"bg-white rounded-lg shadow overflow-hidden"},f={key:0,class:"p-8 text-center"},h={key:1,class:"p-8 text-center text-gray-500"},C={key:2,class:"divide-y"},w={class:"flex items-center justify-between"},k={class:"flex items-center space-x-4"},E={class:"flex items-center space-x-2"},j=["onUpdate:modelValue","onChange"],V={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-gray-200"},U=["src","alt"],z={class:"font-medium text-gray-900"},I={key:0,class:"text-sm text-gray-600"},N={class:"flex items-center space-x-2"},_=["onClick"],O=["onClick"],S={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},q={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},D={class:"text-lg font-semibold mb-4"},A={class:"flex justify-end space-x-3 pt-4"},F=["disabled"],G=e({__name:"AdminCategorias",setup(e){const{showNotification:G}=g(),P=a([]),T=a(!1),B=a(!1),H=a(!1),J=a(null),K=a({name:"",description:"",image:"",order:1}),L=async()=>{B.value=!0;try{if(J.value){const e=P.value.findIndex(e=>e.id===J.value.id);-1!==e&&(P.value[e]={...J.value,...K.value}),G("Categoria atualizada com sucesso!","success")}else{const e={id:Date.now(),...K.value};P.value.push(e),G("Categoria criada com sucesso!","success")}H.value=!1,K.value={name:"",description:"",image:"",order:P.value.length+1}}catch(e){console.error("Erro ao salvar categoria:",e),G("Erro ao salvar categoria","error")}finally{B.value=!1}};return r(()=>{(async()=>{T.value=!0;try{P.value=[{id:1,name:"Chinelos Esportivos",description:"Chinelos confortáveis para atividades físicas",image:"https://via.placeholder.com/100x100?text=Esportivos",order:1},{id:2,name:"Chinelos Casuais",description:"Chinelos para o dia a dia",image:"https://via.placeholder.com/100x100?text=Casuais",order:2}]}catch(e){console.error("Erro ao carregar categorias:",e),G("Erro ao carregar categorias","error")}finally{T.value=!1}})()}),(e,a)=>(t(),l("div",x,[s("div",b,[a[6]||(a[6]=s("h1",{class:"text-2xl font-bold text-gray-900"}," Gerenciar Categorias ",-1)),s("button",{onClick:a[0]||(a[0]=e=>{H.value=!0,J.value=null,K.value={name:"",description:"",image:"",order:P.value.length+1}}),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"}," + Nova Categoria ")]),s("div",y,[a[9]||(a[9]=s("div",{class:"px-6 py-4 border-b"},[s("h2",{class:"text-lg font-semibold text-gray-900"}," Categorias Cadastradas ")],-1)),T.value?(t(),l("div",f,[...a[7]||(a[7]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),s("p",{class:"mt-2 text-gray-600"},"Carregando categorias...",-1)])])):0===P.value.length?(t(),l("div",h," Nenhuma categoria cadastrada ainda. ")):(t(),l("div",C,[(t(!0),l(i,null,d(P.value,e=>(t(),l("div",{key:e.id,class:"p-6 hover:bg-gray-50 transition"},[s("div",w,[s("div",k,[s("div",E,[a[8]||(a[8]=s("span",{class:"text-sm text-gray-500"},"Ordem:",-1)),u(s("input",{"onUpdate:modelValue":a=>e.order=a,onChange:e=>(async()=>{try{G("Ordem atualizada!","success")}catch(e){console.error("Erro ao atualizar ordem:",e),G("Erro ao atualizar ordem","error")}})(),type:"number",min:"1",class:"w-16 px-2 py-1 border rounded text-sm"},null,40,j),[[m,e.order,void 0,{number:!0}]])]),e.image?(t(),l("div",V,[s("img",{src:e.image,alt:e.name,class:"w-full h-full object-cover"},null,8,U)])):o("",!0),s("div",null,[s("h3",z,n(e.name),1),e.description?(t(),l("p",I,n(e.description),1)):o("",!0)])]),s("div",N,[s("button",{onClick:a=>(e=>{J.value=e,K.value={...e},H.value=!0})(e),class:"text-blue-600 hover:text-blue-600 px-3 py-1 rounded text-sm"}," Editar ",8,_),s("button",{onClick:a=>(async e=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{P.value=P.value.filter(a=>a.id!==e),G("Categoria excluída com sucesso!","success")}catch(a){console.error("Erro ao excluir categoria:",a),G("Erro ao excluir categoria","error")}})(e.id),class:"text-red-600 hover:text-red-800 px-3 py-1 rounded text-sm"}," Excluir ",8,O)])])]))),128))]))]),H.value?(t(),l("div",S,[s("div",q,[s("h3",D,n(J.value?"Editar Categoria":"Nova Categoria"),1),s("form",{onSubmit:c(L,["prevent"]),class:"space-y-4"},[s("div",null,[a[10]||(a[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nome",-1)),u(s("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>K.value.name=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,K.value.name]])]),s("div",null,[a[11]||(a[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Descrição",-1)),u(s("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>K.value.description=e),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,K.value.description]])]),s("div",null,[v(p,{modelValue:K.value.image,"onUpdate:modelValue":a[3]||(a[3]=e=>K.value.image=e),label:"Imagem da Categoria","preview-alt":"Preview da categoria"},null,8,["modelValue"])]),s("div",null,[a[12]||(a[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ordem",-1)),u(s("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>K.value.order=e),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,K.value.order,void 0,{number:!0}]])]),s("div",A,[s("button",{type:"button",onClick:a[5]||(a[5]=e=>H.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancelar "),s("button",{type:"submit",disabled:B.value,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"},n(B.value?"Salvando...":"Salvar"),9,F)])],32)])])):o("",!0)]))}},[["__scopeId","data-v-6e9ce9d0"]]);export{G as default};
