import{r as e,u as a,k as t,_ as r,l,c as o,a as s,d as n,b as u,t as i,m as d,n as m,h as c,w as p,v as g}from"./index-BgbrXe1X.js";const v={class:"space-y-2"},b={key:0,class:"block text-sm font-medium text-gray-700"},f={key:1,class:"relative"},y=["src","alt"],x={key:0,class:"text-blue-600"},h={key:1,class:"text-gray-500"},w={key:2,class:"text-gray-500"},k={class:"flex items-center space-x-2"},I=r({__name:"ImageUpload",props:{modelValue:{type:String,default:""},label:{type:String,default:""},previewAlt:{type:String,default:"Preview"}},emits:["update:modelValue"],setup(r,{emit:I}){const V=r,C=I,{uploading:A,uploadImage:U,validateImageUrl:_}=function(){const{showNotification:r}=a(),l=e(!1);return{uploading:l,uploadImage:async(e,a="uploads")=>{if(!e)return null;if(!e.type.startsWith("image/"))return r("Por favor, selecione apenas arquivos de imagem.","error"),null;if(e.size>5242880)return r("A imagem deve ter no máximo 5MB.","error"),null;l.value=!0;try{const l=new FormData;l.append("image",e),l.append("folder",a);const o=await t.post("/upload/image",l,{headers:{"Content-Type":"multipart/form-data"}});return r("Imagem enviada com sucesso!","success"),o.data.data.url}catch(o){return console.error("Erro ao fazer upload da imagem:",o),r("Erro ao fazer upload da imagem.","error"),null}finally{l.value=!1}},validateImageUrl:e=>{if(!e)return!0;try{return new URL(e),!0}catch{return!1}}}}(),j=e(null),B=e(""),M=async e=>{const a=e.target.files[0];if(a){const e=await U(a);e&&C("update:modelValue",e)}e.target.value=""},P=async e=>{const a=e.dataTransfer.files[0];if(a){const e=await U(a);e&&C("update:modelValue",e)}},S=()=>{B.value&&_(B.value)?C("update:modelValue",B.value):B.value&&(B.value="")};return l(()=>V.modelValue,e=>{e&&e.startsWith("http")?B.value=e:B.value=""},{immediate:!0}),(e,a)=>(s(),o("div",v,[r.label?(s(),o("label",b,i(r.label),1)):n("",!0),r.modelValue&&!d(A)?(s(),o("div",f,[u("img",{src:r.modelValue,alt:r.previewAlt,class:"w-full h-32 object-cover rounded-lg border"},null,8,y),u("button",{onClick:a[0]||(a[0]=a=>e.$emit("update:modelValue","")),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition",title:"Remover imagem"}," × ")])):n("",!0),u("div",{onDragover:a[3]||(a[3]=c(()=>{},["prevent"])),onDrop:c(P,["prevent"]),class:m(["border-2 border-dashed rounded-lg p-4 text-center transition-colors",d(A)?"border-blue-300 bg-blue-50":"border-gray-300 hover:border-gray-400"])},[u("input",{ref_key:"fileInput",ref:j,type:"file",accept:"image/*",onChange:M,class:"hidden"},null,544),d(A)?(s(),o("div",x,[...a[5]||(a[5]=[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"},null,-1),u("p",null,"Enviando imagem...",-1)])])):r.modelValue?(s(),o("div",w,[u("button",{onClick:a[2]||(a[2]=a=>e.$refs.fileInput.click()),class:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition"}," Alterar imagem ")])):(s(),o("div",h,[a[6]||(a[6]=u("svg",{class:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),a[7]||(a[7]=u("p",{class:"mb-2"},"Arraste uma imagem aqui ou",-1)),u("button",{onClick:a[1]||(a[1]=a=>e.$refs.fileInput.click()),class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"}," Selecionar arquivo "),a[8]||(a[8]=u("p",{class:"text-xs text-gray-400 mt-2"},"PNG, JPG até 5MB",-1))]))],34),u("div",k,[a[9]||(a[9]=u("span",{class:"text-sm text-gray-500"},"Ou",-1)),p(u("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>B.value=e),type:"url",placeholder:"Cole uma URL de imagem",class:"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onBlur:S},null,544),[[g,B.value]])])]))}},[["__scopeId","data-v-2d31b911"]]);export{I};
