import{_ as e,j as l,d as a,p as t,c as s,o as r,a as o,b as n,F as i,g as c,t as d,y as u,u as v,v as b,k as x,x as p,C as g,z as m,n as y}from"./index-klLf_Ke9.js";import{a as f}from"./adminService-JkG_pKWo.js";import{I as h}from"./ImageUpload-DS_a78fF.js";import"./useImageUpload-DFF4QoUP.js";const k={class:"space-y-6"},w={class:"flex justify-between items-center"},C={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},j={class:"bg-white rounded-lg shadow overflow-hidden"},E={class:"p-4 space-y-3"},B={class:"flex items-center justify-between"},I={class:"flex items-center space-x-3"},U=["src","alt"],V={class:"font-medium"},N={class:"text-sm text-gray-600"},S={class:"flex items-center space-x-2"},A=["onClick"],_=["onClick"],z={key:0,class:"text-center text-gray-500 py-4"},P={class:"bg-white rounded-lg shadow overflow-hidden"},T={class:"p-4 space-y-3"},L={class:"flex items-center justify-between"},q={class:"flex items-center space-x-3"},H=["src","alt"],D={class:"font-medium"},F={class:"text-sm text-gray-600"},G={class:"flex items-center space-x-2"},O=["onClick"],J=["onClick"],K={key:0,class:"text-center text-gray-500 py-4"},M={class:"bg-white rounded-lg shadow overflow-hidden"},Q={class:"px-6 py-4 border-b bg-purple-50"},R={class:"flex justify-between items-center"},W={class:"p-4"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Y=["src","alt"],Z={class:"font-medium text-sm"},$={class:"text-xs text-gray-600 mb-2"},ee={class:"flex justify-between items-center"},le={class:"flex space-x-1"},ae=["onClick"],te=["onClick"],se={key:0,class:"text-center text-gray-500 py-8"},re={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},oe={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},ne={class:"text-lg font-semibold mb-4"},ie={class:"flex items-center"},ce={class:"flex justify-end space-x-3 pt-4"},de=["disabled"],ue=e({__name:"AdminBanners",setup(e){const{showNotification:ue}=m(),ve=l([]),be=l(!1),xe=l(!1),pe=l(!1),ge=l(null),me=l({title:"",image:"",link:"",position:"hero",active:!0,order:1}),ye=a(()=>ve.value.filter(e=>"hero"===e.position)),fe=a(()=>ve.value.filter(e=>"sidebar"===e.position)),he=a(()=>ve.value.filter(e=>"carousel"===e.position)),ke=async()=>{xe.value=!0;try{if(ge.value){const e=ve.value.findIndex(e=>e.id===ge.value.id);-1!==e&&(ve.value[e]={...ge.value,...me.value}),ue("Banner atualizado com sucesso!","success")}else{const e={id:Date.now(),...me.value};ve.value.push(e),ue("Banner criado com sucesso!","success")}pe.value=!1,me.value={title:"",image:"",link:"",position:"hero",active:!0,order:ve.value.length+1}}catch(e){console.error("Erro ao salvar banner:",e),ue("Erro ao salvar banner","error")}finally{xe.value=!1}},we=e=>{ge.value=e,me.value={...e},pe.value=!0},Ce=async e=>{if(confirm("Tem certeza que deseja excluir este banner?"))try{ve.value=ve.value.filter(l=>l.id!==e),ue("Banner excluído com sucesso!","success")}catch(l){console.error("Erro ao excluir banner:",l),ue("Erro ao excluir banner","error")}};return t(()=>{(async()=>{be.value=!0;try{console.log("Carregando banners...");const e=await f.getBanners();ve.value=e.data||[],console.log("Banners carregados:",ve.value)}catch(e){console.error("Erro ao carregar banners:",e),ue("Erro ao carregar banners","error"),ve.value=[]}finally{be.value=!1}})()}),(e,l)=>(r(),s("div",k,[o("div",w,[l[9]||(l[9]=o("h1",{class:"text-2xl font-bold text-gray-900"}," Gerenciar Banners & Promoções ",-1)),o("button",{onClick:l[0]||(l[0]=e=>{pe.value=!0,ge.value=null,me.value={title:"",image:"",link:"",position:"hero",active:!0,order:ve.value.length+1}}),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"}," + Novo Banner ")]),o("div",C,[o("div",j,[l[10]||(l[10]=o("div",{class:"px-6 py-4 border-b bg-blue-50"},[o("h2",{class:"text-lg font-semibold text-gray-900"}," Hero (Topo da Página) ")],-1)),o("div",E,[(r(!0),s(i,null,c(ye.value,e=>(r(),s("div",{key:e.id,class:"border rounded p-3"},[o("div",B,[o("div",I,[o("img",{src:e.image,alt:e.title,class:"w-12 h-12 object-cover rounded"},null,8,U),o("div",null,[o("h4",V,d(e.title),1),o("p",N,d(e.link),1)])]),o("div",S,[o("span",{class:y(["px-2 py-1 rounded text-xs",e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(e.active?"Ativo":"Inativo"),3),o("button",{onClick:l=>we(e),class:"text-blue-600 hover:text-blue-800 text-sm"}," Editar ",8,A),o("button",{onClick:l=>Ce(e.id),class:"text-red-600 hover:text-red-800 text-sm"}," Excluir ",8,_)])])]))),128)),0===ye.value.length?(r(),s("div",z," Nenhum banner hero cadastrado ")):n("",!0)])]),o("div",P,[l[11]||(l[11]=o("div",{class:"px-6 py-4 border-b bg-green-50"},[o("h2",{class:"text-lg font-semibold text-gray-900"}," Sidebar (Lateral) ")],-1)),o("div",T,[(r(!0),s(i,null,c(fe.value,e=>(r(),s("div",{key:e.id,class:"border rounded p-3"},[o("div",L,[o("div",q,[o("img",{src:e.image,alt:e.title,class:"w-12 h-12 object-cover rounded"},null,8,H),o("div",null,[o("h4",D,d(e.title),1),o("p",F,d(e.link),1)])]),o("div",G,[o("span",{class:y(["px-2 py-1 rounded text-xs",e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(e.active?"Ativo":"Inativo"),3),o("button",{onClick:l=>we(e),class:"text-blue-600 hover:text-blue-800 text-sm"}," Editar ",8,O),o("button",{onClick:l=>Ce(e.id),class:"text-red-600 hover:text-red-800 text-sm"}," Excluir ",8,J)])])]))),128)),0===fe.value.length?(r(),s("div",K," Nenhum banner lateral cadastrado ")):n("",!0)])])]),o("div",M,[o("div",Q,[o("div",R,[l[12]||(l[12]=o("h2",{class:"text-lg font-semibold text-gray-900"}," Carrosséis ",-1)),o("button",{onClick:l[1]||(l[1]=e=>{pe.value=!0,ge.value=null,me.value={title:"",image:"",link:"",position:"carousel",active:!0,order:he.value.length+1}}),class:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700"}," + Novo Slide ")])]),o("div",W,[o("div",X,[(r(!0),s(i,null,c(he.value,e=>(r(),s("div",{key:e.id,class:"border rounded p-3"},[o("img",{src:e.image,alt:e.title,class:"w-full h-24 object-cover rounded mb-2"},null,8,Y),o("h4",Z,d(e.title),1),o("p",$,d(e.link),1),o("div",ee,[o("span",{class:y(["px-2 py-1 rounded text-xs",e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(e.active?"Ativo":"Inativo"),3),o("div",le,[o("button",{onClick:l=>we(e),class:"text-blue-600 hover:text-blue-800 text-xs"}," Editar ",8,ae),o("button",{onClick:l=>Ce(e.id),class:"text-red-600 hover:text-red-800 text-xs"}," Excluir ",8,te)])])]))),128))]),0===he.value.length?(r(),s("div",se," Nenhum slide de carrossel cadastrado ")):n("",!0)])]),pe.value?(r(),s("div",re,[o("div",oe,[o("h3",ne,d(ge.value?"Editar Banner":"Novo Banner"),1),o("form",{onSubmit:u(ke,["prevent"]),class:"space-y-4"},[o("div",null,[l[13]||(l[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Título",-1)),v(o("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>me.value.title=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[b,me.value.title]])]),o("div",null,[x(h,{modelValue:me.value.image,"onUpdate:modelValue":l[3]||(l[3]=e=>me.value.image=e),label:"Imagem do Banner","preview-alt":"Preview do banner"},null,8,["modelValue"])]),o("div",null,[l[14]||(l[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Link (opcional)",-1)),v(o("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>me.value.link=e),type:"url",placeholder:"https://exemplo.com/pagina",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[b,me.value.link]])]),o("div",null,[l[16]||(l[16]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Posição",-1)),v(o("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>me.value.position=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...l[15]||(l[15]=[o("option",{value:"hero"},"Hero (Topo)",-1),o("option",{value:"sidebar"},"Sidebar (Lateral)",-1),o("option",{value:"carousel"},"Carrossel",-1)])],512),[[p,me.value.position]])]),o("div",ie,[v(o("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>me.value.active=e),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[g,me.value.active]]),l[17]||(l[17]=o("label",{class:"ml-2 block text-sm text-gray-900"},"Ativo",-1))]),o("div",null,[l[18]||(l[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ordem",-1)),v(o("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>me.value.order=e),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[b,me.value.order,void 0,{number:!0}]])]),o("div",ce,[o("button",{type:"button",onClick:l[8]||(l[8]=e=>pe.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancelar "),o("button",{type:"submit",disabled:xe.value,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"},d(xe.value?"Salvando...":"Salvar"),9,de)])],32)])])):n("",!0)]))}},[["__scopeId","data-v-93006fae"]]);export{ue as default};
